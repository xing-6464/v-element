import{d as R,O as S,ac as U,h as f,k as _,y as D,o as a,c as n,F as T,r as m,e as t,m as F,a4 as P,ad as j,N as z,p as I,b as h,a0 as E,ae as X,n as q,U as G}from"./framework.Dcy6uJZY.js";import{_ as k}from"./Icon.vue_vue_type_script_setup_true_lang.B3H2jUux.js";const ae=Symbol("formContextKey"),H=Symbol("formItemContextKey"),J={key:0,class:"x-input__prepend"},L={class:"x-input__wrapper"},Q={key:0,class:"x-input__prefix"},W=["type","disabled","readonly","autocomplete","placeholder","autofocus","form"],Y={key:1,class:"x-input__append"},Z=["disabled","readonly","autocomplete","placeholder","autofocus","form"],oe=R({name:"XInput",inheritAttrs:!1,__name:"Input",props:{type:{default:"text"},modelValue:{},size:{},disabled:{type:Boolean},clearable:{type:Boolean},showPassword:{type:Boolean},placeholder:{},readonly:{type:Boolean},autocomplete:{default:"off"},autofocus:{type:Boolean},form:{}},emits:["update:modelValue","input","change","focus","blur","clear"],setup(K,{expose:M,emit:N}){const r=S(H),y=e=>{var l;(l=r==null?void 0:r.validate)==null||l.call(r,e).catch(i=>{console.error(i.errors)})},u=K,o=N,b=U(),s=f(u.modelValue),d=f(),c=f(!1),p=f(!1),v=_(()=>u.showPassword&&!u.disabled&&!!s.value),w=_(()=>u.clearable&&!u.disabled&&!!s.value&&c.value);D(()=>u.modelValue,e=>{s.value=e});const x=()=>{},A=async()=>{await G(),d.value.focus()},$=()=>{p.value=!p.value},V=()=>{o("update:modelValue",s.value),o("input",s.value),y("input")},B=()=>{o("change",s.value),y("change")},C=e=>{c.value=!0,o("focus",e)},g=e=>{c.value=!1,o("blur",e),y("blur")},O=()=>{s.value="",o("update:modelValue",""),o("clear"),o("change",""),o("input","")};return M({ref:d.value}),(e,l)=>(a(),n("div",{class:q(["x-input",{[`x-input--${e.type}`]:e.type,[`x-input--${e.size}`]:e.size,"is-disabled":e.disabled,"is-prepend":e.$slots.prepend,"is-append":e.$slots.append,"is-prefix":e.$slots.prefix,"is-suffix":e.$slots.suffix,"is-focus":c.value}])},[e.type!=="textarea"?(a(),n(T,{key:0},[e.$slots.prepend?(a(),n("div",J,[m(e.$slots,"prepend")])):t("",!0),F("div",L,[e.$slots.prefix?(a(),n("span",Q,[m(e.$slots,"prefix")])):t("",!0),P(F("input",z({class:"x-input__inner",ref_key:"inputRef",ref:d},I(b),{type:e.showPassword?p.value?"text":"password":e.type,disabled:e.disabled,readonly:e.readonly,autocomplete:e.autocomplete,placeholder:e.placeholder,autofocus:e.autofocus,form:e.form,"onUpdate:modelValue":l[0]||(l[0]=i=>s.value=i),onInput:V,onFocus:C,onBlur:g,onChange:B}),null,16,W),[[j,s.value]]),e.$slots.suffix||w.value||v.value?(a(),n("span",{key:1,class:"x-input__suffix",onClick:A},[m(e.$slots,"suffix"),w.value?(a(),h(k,{key:0,icon:"circle-xmark",class:"x-input__clear",onClick:O,onMousedown:E(x,["prevent"])})):t("",!0),v.value&&p.value?(a(),h(k,{key:1,icon:"eye",class:"x-input__password",onClick:$})):t("",!0),v.value&&!p.value?(a(),h(k,{key:2,icon:"eye-slash",class:"x-input__password",onClick:$})):t("",!0)])):t("",!0)]),e.$slots.append?(a(),n("div",Y,[m(e.$slots,"append")])):t("",!0)],64)):P((a(),n("textarea",z({key:1,class:"x-textarea__wrapper",ref_key:"inputRef",ref:d},I(b),{disabled:e.disabled,"onUpdate:modelValue":l[1]||(l[1]=i=>s.value=i),readonly:e.readonly,autocomplete:e.autocomplete,placeholder:e.placeholder,autofocus:e.autofocus,form:e.form,onInput:V,onFocus:C,onBlur:g,onChange:B}),null,16,Z)),[[X,s.value]])],2))}});export{oe as _,H as a,ae as f};
